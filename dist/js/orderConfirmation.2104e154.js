(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderConfirmation"],{"0eb4":function(t,e,c){"use strict";c.d(e,"b",(function(){return s}));var n=c("7a23"),r={class:"toast"};function a(t,e,c,a,o,s){return Object(n["t"])(),Object(n["f"])("div",r,Object(n["C"])(c.message),1)}var o={props:["message"]},s=function(){var t=Object(n["x"])({show:!1,toastMessage:""}),e=function(e){t.show=!0,t.toastMessage=e,setTimeout((function(){t.show=!1,t.toastMessage=""}),2e3)},c=Object(n["D"])(t),r=c.show,a=c.toastMessage;return{show:r,toastMessage:a,showToast:e}},i=(c("752a"),c("6b0d")),u=c.n(i);const d=u()(o,[["render",a],["__scopeId","data-v-20fb144e"]]);e["a"]=d},1148:function(t,e,c){"use strict";var n=c("5926"),r=c("577e"),a=c("1d80"),o=RangeError;t.exports=function(t){var e=r(a(this)),c="",s=n(t);if(s<0||s==1/0)throw o("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(c+=e);return c}},"15e8":function(t,e,c){},"1c56":function(t,e,c){},"29a7":function(t,e,c){"use strict";c("15e8")},"2c26":function(t,e,c){},"3e83":function(t,e,c){},"408a":function(t,e,c){var n=c("e330");t.exports=n(1..valueOf)},"5a2e":function(t,e,c){"use strict";c("1c56")},"62b3":function(t,e,c){"use strict";c("3e83")},"752a":function(t,e,c){"use strict";c("e228")},"75c9":function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));c("b680");var n=c("7a23"),r=c("5502"),a=function(t){var e=Object(r["b"])(),c=e.state.cartList,a=function(t,c,n,r){e.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:n,num:r})},o=Object(n["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.productList)||{},r={};for(var a in n){var o=n[a];o.count>0&&(r[a]=o)}return n})),s=Object(n["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.shopName)||"";return n})),i=Object(n["b"])((function(){var e,n=null===(e=c[t])||void 0===e?void 0:e.productList,r={total:0,price:0,allChecked:!0};if(n)for(var a in n){var o=n[a];r.total+=o.count,o.check&&(r.price+=o.count*o.price),o.count>0&&!o.check&&(r.allChecked=!1)}return r.price=r.price.toFixed(2),r}));return{cartList:c,productList:o,shopName:s,calculations:i,changeCartItemInfo:a}}},b680:function(t,e,c){"use strict";var n=c("23e7"),r=c("e330"),a=c("5926"),o=c("408a"),s=c("1148"),i=c("d039"),u=RangeError,d=String,l=Math.floor,b=r(s),_=r("".slice),f=r(1..toFixed),p=function(t,e,c){return 0===e?c:e%2===1?p(t,e-1,c*t):p(t*t,e/2,c)},v=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},O=function(t,e,c){var n=-1,r=c;while(++n<6)r+=e*t[n],t[n]=r%1e7,r=l(r/1e7)},j=function(t,e){var c=6,n=0;while(--c>=0)n+=t[c],t[c]=l(n/e),n=n%e*1e7},h=function(t){var e=6,c="";while(--e>=0)if(""!==c||0===e||0!==t[e]){var n=d(t[e]);c=""===c?n:c+b("0",7-n.length)+n}return c},m=i((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!i((function(){f({})}));n({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,c,n,r,s=o(this),i=a(t),l=[0,0,0,0,0,0],f="",m="0";if(i<0||i>20)throw u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return d(s);if(s<0&&(f="-",s=-s),s>1e-21)if(e=v(s*p(2,69,1))-69,c=e<0?s*p(2,-e,1):s/p(2,e,1),c*=4503599627370496,e=52-e,e>0){O(l,0,c),n=i;while(n>=7)O(l,1e7,0),n-=7;O(l,p(10,n,1),0),n=e-1;while(n>=23)j(l,1<<23),n-=23;j(l,1<<n),O(l,1,1),j(l,2),m=h(l)}else O(l,0,c),O(l,1<<-e,0),m=h(l)+b("0",i);return i>0?(r=m.length,m=f+(r<=i?"0."+b("0",i-r)+m:_(m,0,r-i)+"."+_(m,r-i))):m=f+m,m}})},b957:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),r={class:"wrapper"};function a(t,e,c,a,o,s){var i=Object(n["A"])("TopArray"),u=Object(n["A"])("ProductList"),d=Object(n["A"])("Order");return Object(n["t"])(),Object(n["f"])("div",r,[Object(n["j"])(i),Object(n["j"])(u),Object(n["j"])(d)])}var o={class:"top"},s={class:"top__header"},i=Object(n["i"])(" 确认订单 "),u=Object(n["h"])('<div class="top__receiver" data-v-927c2a54><div class="top__receiver__title" data-v-927c2a54>收货地址：</div><div class="top__receiver__address" data-v-927c2a54>北京理工大学国防科技园2号楼10层</div><div class="top__receiver__info" data-v-927c2a54><span class="top__receiver__info__name" data-v-927c2a54>阿涛（先生）</span><span class="top__receiver__info__name" data-v-927c2a54>18911024266</span></div><div class="iconfont top__receiver__icon" data-v-927c2a54></div></div>',1);function d(t,e,c,r,a,d){return Object(n["t"])(),Object(n["f"])("div",o,[Object(n["g"])("div",s,[Object(n["g"])("div",{class:"iconfont top__header__back",onClick:e[0]||(e[0]=function(){return r.handleBackClick&&r.handleBackClick.apply(r,arguments)})},""),i]),u])}var l=c("6c02"),b={name:"TopArray",setup:function(){var t=Object(l["d"])(),e=function(){t.back()};return{handleBackClick:e}}},_=(c("fb24"),c("6b0d")),f=c.n(_);const p=f()(b,[["render",d],["__scopeId","data-v-927c2a54"]]);var v=p,O=(c("b0c0"),c("b680"),function(t){return Object(n["w"])("data-v-d27d15da"),t=t(),Object(n["u"])(),t}),j={class:"products"},h={class:"products__tittle"},m={class:"products__wrapper"},g={class:"products__list"},w=["src"],C={class:"products__item__detail"},k={class:"products__item__title"},I={class:"products__item__price"},L={class:"products__item__single"},x=O((function(){return Object(n["g"])("span",{class:"products__item__yen"},"¥",-1)})),M={class:"products__item__total"},y=O((function(){return Object(n["g"])("span",{class:"products__item__yen"},"¥",-1)}));function N(t,e,c,r,a,o){return Object(n["t"])(),Object(n["f"])("div",j,[Object(n["g"])("div",h,Object(n["C"])(r.shopName),1),Object(n["g"])("div",m,[Object(n["g"])("div",g,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(r.productList,(function(t){return Object(n["t"])(),Object(n["f"])("div",{class:"products__item",key:t._id},[Object(n["g"])("img",{class:"products__item__img",src:t.imgUrl},null,8,w),Object(n["g"])("div",C,[Object(n["g"])("h4",k,Object(n["C"])(t.name),1),Object(n["g"])("p",I,[Object(n["g"])("span",L,[x,Object(n["i"])(" "+Object(n["C"])(t.price)+" x "+Object(n["C"])(t.count),1)]),Object(n["g"])("span",M,[y,Object(n["i"])(" "+Object(n["C"])((t.price*t.count).toFixed(2)),1)])])])])})),128))])])])}var T=c("75c9"),A={name:"ProductsList",setup:function(){var t=Object(l["c"])(),e=t.params.id,c=Object(T["a"])(e),n=c.productList,r=c.shopName;return{productList:n,shopName:r}}};c("29a7");const S=f()(A,[["render",N],["__scopeId","data-v-d27d15da"]]);var F=S,B=function(t){return Object(n["w"])("data-v-4ad19e84"),t=t(),Object(n["u"])(),t},P={class:"order"},D={class:"order__price"},E=Object(n["i"])("实付金额: "),J=B((function(){return Object(n["g"])("h3",{class:"mask__content__tittle"},"确认离开收银台？",-1)})),R=B((function(){return Object(n["g"])("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消！",-1)})),z={class:"mask__content__btns"};function G(t,e,c,r,a,o){var s=Object(n["A"])("Toast");return Object(n["t"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("div",P,[Object(n["g"])("div",D,[E,Object(n["g"])("b",null,"￥"+Object(n["C"])(r.calculations.price),1)]),Object(n["g"])("div",{class:"order__btn",onClick:e[0]||(e[0]=function(){return r.handleShowConfirmChange(!0)})},"提交订单")]),Object(n["K"])(Object(n["g"])("div",{class:"mask",onClick:e[4]||(e[4]=function(){return r.handleShowConfirmChange(!1)})},[Object(n["g"])("div",{class:"mask__content",onClick:e[3]||(e[3]=Object(n["L"])((function(){}),["stop"]))},[J,R,Object(n["g"])("div",z,[Object(n["g"])("div",{class:"mask__content__btn mask__content__btn--first",onClick:e[1]||(e[1]=function(){return r.handleConfirmOrder(!0)})},"取消订单 "),Object(n["g"])("div",{class:"mask__content__btn mask__content__btn--last",onClick:e[2]||(e[2]=function(){return r.handleConfirmOrder(!1)})},"确认支付 ")])])],512),[[n["G"],r.showConfirm]]),r.show?(Object(n["t"])(),Object(n["d"])(s,{key:0,message:r.toastMessage},null,8,["message"])):Object(n["e"])("",!0)],64)}var K=c("c7eb"),U=c("1da1"),W=c("5502"),q=c("b775"),H=c("0eb4"),Q=function(){var t=Object(l["c"])(),e=Object(l["d"])(),c=Object(W["b"])(),n=parseInt(t.params.id,10),r=Object(T["a"])(n),a=r.calculations,o=r.shopName,s=r.productList,i=Object(H["b"])(),u=i.show,d=i.toastMessage,b=i.showToast,_=function(){var t=Object(U["a"])(Object(K["a"])().mark((function t(r){var a,i,u,d;return Object(K["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in a=[],s.value)u=s.value[i],a.push({id:parseInt(u._id),num:u.count});return t.prev=2,t.next=5,Object(q["b"])("/api/order",{addressId:1,shopId:n,shopName:o.vale,isCanceled:r,products:a});case 5:d=t.sent,0===(null===d||void 0===d?void 0:d.errno)?(c.commit("clearCartData",n),e.push({name:"OrderList"})):b("下单失败"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),b("请求失败");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}();return{show:u,toastMessage:d,calculations:a,handleConfirmOrder:_}},V=function(){var t=Object(n["y"])(!1),e=function(e){t.value=e};return{showConfirm:t,handleShowConfirmChange:e}},X={name:"Order",components:{Toast:H["a"]},setup:function(){var t=Q(),e=t.show,c=t.toastMessage,n=t.calculations,r=t.handleConfirmOrder,a=V(),o=a.showConfirm,s=a.handleShowConfirmChange;return{calculations:n,show:e,toastMessage:c,showConfirm:o,handleConfirmOrder:r,handleShowConfirmChange:s}}};c("5a2e");const Y=f()(X,[["render",G],["__scopeId","data-v-4ad19e84"]]);var Z=Y,$={name:"OrderConfirmation",components:{TopArray:v,ProductList:F,Order:Z}};c("62b3");const tt=f()($,[["render",a],["__scopeId","data-v-0364f404"]]);e["default"]=tt},e228:function(t,e,c){},fb24:function(t,e,c){"use strict";c("2c26")}}]);
//# sourceMappingURL=orderConfirmation.2104e154.js.map